<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spirit</title>
  <meta name="theme-color" content="#0b0d12" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --fg:#0f172a; --card:#ffffffdd;
      --accent:#facc15; --accent2:#fde047; --accent3:#fbbf24; /* yellow tones */
      --bg1:#0b0d12; --bg2:#0e1320;
      --title-font: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --body-font:  ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --gold1:#d4af37; --gold2:#f6e27a; --gold3:#b88910;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:var(--body-font);color:#fff;background:#0b0d12;overflow:hidden}

    .bg{
      position:fixed; inset:0; z-index:-4;
      background:
        radial-gradient(1100px 700px at 15% 20%, color-mix(in oklab, var(--accent) 45%, transparent), transparent 60%),
        radial-gradient(1000px 700px at 85% 30%, color-mix(in oklab, var(--accent2) 45%, transparent), transparent 60%),
        radial-gradient(900px 700px at 40% 90%, color-mix(in oklab, var(--accent3) 35%, transparent), transparent 60%),
        linear-gradient(120deg, var(--bg1), var(--bg2) 50%, var(--bg1));
      animation:bgDrift 20s ease-in-out infinite alternate; filter:saturate(1.05) brightness(1.03);
    }
    @keyframes bgDrift{from{transform:translateX(0)} to{transform:translateX(-1.6%)}}

    #stars{position:fixed; inset:0; pointer-events:none; z-index:-3}

    .wrap{min-height:100%;display:grid;place-items:center;padding:22px}
    .title{
      margin:0 0 20px 0;
      font-size:clamp(40px,10vw,86px);
      background:linear-gradient(90deg,#fff,color-mix(in srgb,var(--accent2) 35%,#fff));
      -webkit-background-clip:text;background-clip:text;color:transparent;
      filter:drop-shadow(0 8px 24px color-mix(in srgb, var(--accent) 22%, transparent));
      font-weight:900; letter-spacing:.5px; text-align:center
    }

    /* Top-left nav */
    .nav{position:fixed;left:18px;top:18px;display:flex;gap:10px;flex-wrap:wrap;z-index:5}
    .pill{
      display:inline-block;padding:8px 12px;border-radius:999px;background:#ffffffdd;color:#0a0b0f;font-weight:800;text-decoration:none
    }

    .actions{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-top:6px}
    .btn{
      appearance:none;border:0;cursor:pointer;
      padding:14px 18px;border-radius:14px;
      font-weight:900;letter-spacing:.4px;
      color:#0a0b0f;background:var(--card);
      box-shadow:0 10px 26px rgba(0,0,0,.25);
      transition:transform .08s ease, box-shadow .12s ease, background .2s ease, opacity .2s ease;
      user-select:none;text-decoration:none;display:inline-block;
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 14px 30px rgba(0,0,0,.28)}
    .btn:active{transform:translateY(0);box-shadow:0 8px 20px rgba(0,0,0,.2)}

    .btn.gold{
      color:#1a1200;
      background:linear-gradient(180deg, var(--gold2), var(--gold1) 55%, var(--gold3));
      border:1px solid rgba(255,255,255,.35);
      font-family:'Cinzel', serif;
      text-transform:uppercase;
    }

    .hint{opacity:.8;font-size:13px;margin-top:10px;text-align:center;color:#d1d5db}

    /* Modal */
    .overlay{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background:rgba(2,6,23,.55); backdrop-filter:blur(6px); z-index:30; padding:22px;
    }
    .overlay.show{display:flex}
    .card{
      width:min(820px, 95vw);
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      border-radius:18px;
      box-shadow:0 30px 80px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.12);
      padding:18px; color:#e5e7eb;
      animation:pop .18s ease-out;
    }
    @keyframes pop{from{transform:scale(.985);opacity:0} to{transform:scale(1);opacity:1}}

    .badge{display:inline-flex;align-items:center;gap:8px;font-size:12px;font-weight:900;
      color:#111827;background:#ffffff;padding:6px 10px;border-radius:999px;box-shadow:0 8px 18px rgba(0,0,0,.26);}
    .verse-ref{margin:12px 0 6px 0; color:#fde68a; font-weight:800; letter-spacing:.3px}
    .verse-text{font-size:clamp(18px,2.2vw,22px); line-height:1.5; color:#fefce8; margin:0 0 10px 0;}
    .evolved{margin-top:10px; padding:12px; border-radius:12px; background:rgba(255,255,255,.06); border:1px dashed rgba(255,255,255,.18); color:#fef9c3; font-size:15px}
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:flex-end;margin-top:10px}
    .row .left{margin-right:auto}

    .thank-top{
      position:absolute; top:12px; right:12px;
      padding:8px 12px; border-radius:999px;
      background:linear-gradient(180deg, var(--gold2), var(--gold1) 60%, var(--gold3));
      color:#1a1200; border:1px solid rgba(255,255,255,.35);
      font-family:'Cinzel', serif; font-weight:900;
      text-transform:uppercase; cursor:pointer;
    }
    .thank-top:hover{transform:translateY(-1px)}
    .topSpacer{height:10vh}
  </style>
</head>
<body>
  <div class="bg"></div>
  <canvas id="stars"></canvas>

  <!-- Top-left nav: Soul button instead of Home -->
  <div class="nav">
    <a class="pill" href="soul.html">← Soul</a>
  </div>

  <div class="wrap">
    <div class="topSpacer" aria-hidden="true"></div>
    <h1 class="title">Spirit</h1>

    <div class="actions" aria-label="Spirit games">
      <button class="btn gold" id="btnBible">Biblical Verses</button>
      <button class="btn gold" id="btnQuran">Quran Verses</button>
    </div>
    <div class="hint">Pick one, then EVOLVE for context or tap Another for a new verse. “Thank you” closes the game.</div>
  </div>

  <!-- Verse Modal -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true">
    <div class="card">
      <button class="thank-top" id="thankTopBtn">Thank you</button>

      <div class="row">
        <div class="left"><span class="badge" id="gameBadge"><span id="gameLabel">Verses</span></span></div>
      </div>

      <div class="verse-ref" id="verseRef">—</div>
      <p class="verse-text" id="verseText">—</p>
      <div class="evolved" id="evolveBox" hidden>—</div>

      <div class="row" style="margin-top:14px">
        <button class="btn" id="anotherBtn">Another</button>
        <button class="btn gold" id="evolveBtn">EVOLVE</button>
      </div>
    </div>
  </div>

  <script>
    /* ===== Background stars ===== */
    const stars=document.getElementById('stars'), sctx=stars.getContext('2d');
    function resize(){ stars.width=innerWidth; stars.height=innerHeight; }
    resize(); addEventListener('resize',resize);
    const STARS=Array.from({length:160}).map(()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight,z:Math.random()*1.5+.3,dx:(Math.random()-.5)*0.15,dy:(Math.random()-.5)*0.15}));
    (function draw(){ requestAnimationFrame(draw); sctx.clearRect(0,0,stars.width,stars.height);
      STARS.forEach(s=>{ s.x+=s.dx*s.z; s.y+=s.dy*s.z;
        if(s.x<0)s.x+=stars.width; if(s.x>stars.width)s.x-=stars.width;
        if(s.y<0)s.y+=stars.height; if(s.y>stars.height)s.y-=stars.height;
        sctx.fillStyle=`rgba(255,255,255,${0.25*s.z})`; sctx.fillRect(s.x,s.y,1.2*s.z,1.2*s.z);
      });
    })();

    /* Verses logic remains unchanged */
    const BIBLE = [
      { ref:"Psalm 23:1", text:"The Lord is my shepherd; I shall not want.", evolve:"A line from a shepherd psalm..." },
      { ref:"John 3:16", text:"For God so loved the world...", evolve:"A compact summary of gift-love..." }
    ];
    const QURAN = [
      { ref:"Al-Inshirah (94:5)", text:"For indeed, with hardship comes ease.", evolve:"Repeated in 94:6..." },
      { ref:"Al-Baqarah (2:286)", text:"Allah does not burden a soul...", evolve:"A reassurance at the close..." }
    ];
    function createPicker(list){ let pool=list.slice(); return function(){ if(pool.length===0) pool=list.slice(); return pool.splice(Math.floor(Math.random()*pool.length),1)[0]; } }
    const pickBible=createPicker(BIBLE), pickQuran=createPicker(QURAN);

    const overlay=document.getElementById('overlay');
    const verseRef=document.getElementById('verseRef');
    const verseText=document.getElementById('verseText');
    const evolveBox=document.getElementById('evolveBox');
    const gameBadge=document.getElementById('gameBadge');
    const evolveBtn=document.getElementById('evolveBtn');
    const anotherBtn=document.getElementById('anotherBtn');
    const thankTopBtn=document.getElementById('thankTopBtn');
    const btnBible=document.getElementById('btnBible');
    const btnQuran=document.getElementById('btnQuran');

    let currentGame=null, currentVerse=null;

    function openOverlay(){ overlay.classList.add('show'); setTimeout(()=>evolveBtn.focus(), 0); document.body.style.overflow='hidden'; }
    function closeOverlay(){ overlay.classList.remove('show'); document.body.style.overflow=''; }
    function showVerse(v){ currentVerse=v; verseRef.textContent=v.ref; verseText.textContent=v.text; evolveBox.hidden=true; evolveBox.textContent=v.evolve||''; }
    function nextVerse(){ showVerse(currentGame==='bible'?pickBible():pickQuran()); }
    function startGame(kind){ currentGame=kind; gameBadge.querySelector('#gameLabel').textContent=kind==='bible'?'Biblical Verses':'Quran Verses'; nextVerse(); openOverlay(); }

    btnBible.addEventListener('click',()=>startGame('bible'));
    btnQuran.addEventListener('click',()=>startGame('quran'));
    anotherBtn.addEventListener('click',()=>nextVerse());
    evolveBtn.addEventListener('click',()=>{ if(currentVerse && currentVerse.evolve){ evolveBox.hidden=false; } });
    thankTopBtn.addEventListener('click',()=>closeOverlay());
    overlay.addEventListener('click',(e)=>{ if(e.target===overlay){ closeOverlay(); }});
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape' && overlay.classList.contains('show')){ closeOverlay(); }});
  </script>
</body>
</html>
