<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mind</title>
<meta name="theme-color" content="#0b0d12" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<!-- Pixel/retro title font -->
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  :root{
    --fg:#e2e8f0; --muted:#94a3b8; --card:#ffffffdd;
    --accent:#3b82f6; --accent2:#bfdbfe; --accent3:#60a5fa;
    --bg1:#0b0d12; --bg2:#0e1320;
    --tyrian:#66023C;
    --outline:#FFD700; /* bright yellow outline */
    --title-font: "Press Start 2P", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    --body-font:  ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;font-family:var(--body-font);color:#fff;background:#0b0d12;overflow:hidden;}

  /* Background + stars */
  .bg{
    position:fixed; inset:0; z-index:-4;
    background:
      radial-gradient(1100px 700px at 15% 20%, color-mix(in oklab, var(--accent) 45%, transparent), transparent 60%),
      radial-gradient(1000px 700px at 85% 30%, color-mix(in oklab, var(--accent2) 45%, transparent), transparent 60%),
      radial-gradient(900px 700px at 40% 90%, color-mix(in oklab, var(--accent3) 35%, transparent), transparent 60%),
      linear-gradient(120deg, var(--bg1), var(--bg2) 50%, var(--bg1));
    animation:bgDrift 20s ease-in-out infinite alternate; filter:saturate(1.05) brightness(1.03);
  }
  @keyframes bgDrift{from{transform:translateX(0)} to{transform:translateX(-1.6%)}}
  #stars{position:fixed; inset:0; pointer-events:none; z-index:-3}

  /* Nav stays above everything else */
  .nav{position:fixed;left:18px;top:18px;display:flex;gap:10px;flex-wrap:wrap;z-index:50}
  .pill{display:inline-block;padding:8px 12px;border-radius:999px;background:#ffffffdd;color:#0a0b0f;font-weight:800;text-decoration:none}

  /* XP bar */
  .xpWrap{position:fixed; right:18px; top:18px; display:flex; align-items:center; gap:12px; max-width:min(520px, 70vw);z-index:50;}
  .xp-badge{background:#ffffffdd;color:#0a0b0f;border-radius:12px;padding:6px 10px;font-size:13px;font-weight:800;box-shadow:0 8px 18px rgba(0,0,0,.15)}
  .xp-bar{flex:1;height:10px;border-radius:999px;background:rgba(255,255,255,.22);overflow:hidden;position:relative;box-shadow:inset 0 2px 6px rgba(0,0,0,.25)}
  .xp-fill{position:absolute;left:0;top:0;bottom:0;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2));box-shadow:0 6px 20px rgba(13,148,255,.35);transition:width .45s ease}
  .xp-meta{position:fixed;right:18px;top:52px;font-size:12px;color:#cbd5e1;opacity:.9;z-index:50}

  .wrap{height:100%;display:grid;grid-template-rows:auto 1fr;gap:8px;padding:22px}

  /* TITLE — Tyrian purple fill + bright yellow outline */
  .title{
    margin:0;
    font-family:var(--title-font);
    font-weight:900;
    font-size:clamp(36px,9vw,72px);
    line-height:1.08;
    color:var(--tyrian);
    letter-spacing:1px; text-align:center;
    -webkit-text-stroke: 2px var(--outline);
    /* subtle glow to soften the stroke visually */
    text-shadow:
      0 0 10px rgba(255,215,0,.25),
      0 10px 28px rgba(0,0,0,.35),
      0 0 28px rgba(102,2,60,.25);
  }

  /* Game area */
  .game{min-height:0;display:grid;grid-template-rows:auto auto 1fr;gap:16px;max-width:1100px;margin:0 auto;width:100%}

  /* START: button row + description under it */
  .start-wrap{display:grid;justify-items:center;gap:10px}
  .btn{
    appearance:none;border:none;border-radius:16px;padding:16px 24px;font-weight:900;
    cursor:pointer;transition:transform .08s ease, box-shadow .1s ease, opacity .2s ease
  }
  .btn:active{transform:translateY(1px)}
  .btn-lg{font-size:18px;padding:18px 26px;border-radius:18px}
  .btn-primary{
    color:#0b0d12;
    background:linear-gradient(90deg,var(--accent),var(--accent3));
    box-shadow:0 14px 28px rgba(59,130,246,.38), inset 0 -2px 0 rgba(255,255,255,.25);
    display:flex; align-items:center; gap:12px;
  }
  .btn-ghost{background:rgba(255,255,255,.08); color:#e2e8f0; border:1px solid rgba(255,255,255,.16)}

  .subtitle{margin:0;text-align:center;color:var(--muted);font-size:14px}

  /* Mini human-evolution animation inside the button */
  .evo-anim{position:relative; width:140px; height:20px}
  .evo-anim svg{position:absolute; inset:0}
  .evo-anim .stage{opacity:.25; transform:translateX(-8px)}
  .evo-anim .stage.active{opacity:1; transform:translateX(0)}
  .evo-anim .stage{transition:opacity .4s ease, transform .4s ease}
  @keyframes evoCycle{ 0%{opacity:1} 18%{opacity:1} 20%{opacity:.25} }
  .evo-anim .s1{animation:evoCycle 2400ms linear infinite; animation-delay:0ms}
  .evo-anim .s2{animation:evoCycle 2400ms linear infinite; animation-delay:480ms}
  .evo-anim .s3{animation:evoCycle 2400ms linear infinite; animation-delay:960ms}
  .evo-anim .s4{animation:evoCycle 2400ms linear infinite; animation-delay:1440ms}
  .evo-anim .s5{animation:evoCycle 2400ms linear infinite; animation-delay:1920ms}

  .actions{display:flex;gap:10px;flex-wrap:wrap}
  .spacer{flex:1 1 auto}

  /* Colorful, smaller fact cards */
  .fact-grid{
    display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));
    gap:12px;align-content:start;overflow:auto;padding-bottom:8px
  }
  .fact-card{
    --h:210;
    position:relative;
    background:linear-gradient(180deg, hsla(var(--h),80%,60%,.16), hsla(var(--h),80%,40%,.08));
    border:1px solid hsla(var(--h),85%,70%,.35);
    border-radius:14px;padding:10px 12px 12px;backdrop-filter:blur(6px);
    transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .2s ease;
    cursor:pointer;min-height:92px;
    box-shadow:0 6px 18px hsla(var(--h),80%,50%,.18);
  }
  .fact-card:hover{
    transform:translateY(-2px);
    box-shadow:0 12px 30px hsla(var(--h),80%,55%,.28);
    border-color:hsla(var(--h),85%,75%,.55);
  }
  .fact-title{font-weight:900;margin:0 0 4px 0;color:#fff;font-size:14px}
  .fact-blurb{margin:0;color:#dbe7ff;font-size:12.5px;line-height:1.35;opacity:.95}

  /* Evolution panel + professional evolve animation */
  .panel{
    position:relative;
    background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14);
    border-radius:18px;padding:18px 18px 20px;backdrop-filter:blur(8px);
    display:grid;gap:14px;max-width:820px;justify-self:center;
    box-shadow:0 18px 36px rgba(0,0,0,.25);
    overflow:hidden;
  }
  .panel.glow{ animation:panelGlow 700ms ease-out; }
  @keyframes panelGlow{
    0%{ box-shadow:0 0 0 rgba(102,2,60,.0); border-color:rgba(255,255,255,.14); }
    30%{ box-shadow:0 0 40px rgba(102,2,60,.35), 0 18px 36px rgba(0,0,0,.25); border-color:rgba(255,255,255,.28); }
    100%{ box-shadow:0 18px 36px rgba(0,0,0,.25); border-color:rgba(255,255,255,.14); }
  }
  .ripple{
    position:absolute; left:50%; top:50%;
    transform:translate(-50%,-50%) scale(0);
    width:280px; height:280px; border-radius:50%;
    background:radial-gradient(closest-side, rgba(102,2,60,.28), rgba(96,165,250,.22), transparent 70%);
    pointer-events:none; filter:blur(.6px); opacity:.9;
    animation:rippleAnim 700ms ease-out forwards;
  }
  @keyframes rippleAnim{ to{ transform:translate(-50%,-50%) scale(1.6); opacity:0; } }

  .evo-badge{font-size:12px;color:#cbd5e1;opacity:.95}
  .evo-text{font-size:18px;line-height:1.5;margin:0;color:#fff}
  .evo-text.pop{ animation:textPop 160ms ease-out; }
  @keyframes textPop{
    0%{ transform:scale(0.985); filter:blur(.2px); opacity:.96; }
    100%{ transform:scale(1); filter:blur(0); opacity:1; }
  }

  .scrolly{overflow:auto;min-height:0}
  .hidden{display:none !important}

  /* ===== Mobile polish (phones) — keeps desktop unchanged ===== */
  @media (max-width: 480px){
    .nav{top:12px;left:12px}
    .xpWrap{top:12px;right:12px}
    .xp-meta{top:46px;right:12px}

    .wrap{padding:96px 14px 18px}
    .title{
      font-size:clamp(28px, 9.5vw, 44px);
      line-height:1.12;
      letter-spacing:.8px;
      -webkit-text-stroke: 1px var(--outline); /* thinner stroke on small screens */
      text-shadow:
        0 0 8px rgba(255,215,0,.22),
        0 8px 24px rgba(0,0,0,.35),
        0 0 20px rgba(102,2,60,.20);
    }
    .btn-lg{font-size:16px;padding:16px 22px}
    .evo-anim{width:120px;height:18px}
    .subtitle{font-size:12px}
    .fact-grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px}
    .fact-card{min-height:88px;padding:10px}
    .evo-text{font-size:16px}
  }
</style>
</head>
<body>
  <div class="bg"></div>
  <canvas id="stars"></canvas>

  <div class="nav">
    <a class="pill" href="index.html">← Home</a>
    <a class="pill" href="body.html">Body</a>
    <a class="pill" href="heart.html">Heart</a>
    <a class="pill" href="soul.html">Soul</a>
  </div>

  <div class="xpWrap">
    <div class="xp-badge" id="xpBadge">Level 0</div>
    <div class="xp-bar"><div class="xp-fill" id="xpFill"></div></div>
  </div>
  <div class="xp-meta" id="xpMeta">0 / 200 XP</div>

  <div class="wrap">
    <h1 class="title">Mind</h1>

    <section class="game">
      <!-- START VIEW: button then description underneath -->
      <div id="startView" class="start-wrap">
        <button id="btnStartGame" class="btn btn-primary btn-lg" aria-describedby="startDesc">
          <span>Fact Evolution</span>
          <span class="evo-anim" aria-hidden="true">
            <!-- Minimal inline silhouettes (stick-figure-ish) staged left-to-right -->
            <svg viewBox="0 0 140 20" xmlns="http://www.w3.org/2000/svg">
              <!-- Stage 1: crouched -->
              <g class="stage s1">
                <circle cx="10" cy="7" r="2" fill="#0b0d12"/>
                <rect x="8.8" y="9" width="2.4" height="6" rx="1" fill="#0b0d12"/>
                <rect x="7.6" y="14" width="2.2" height="4.5" rx="1" fill="#0b0d12" transform="rotate(15 8.7 16)"/>
                <rect x="10.2" y="14" width="2.2" height="4.5" rx="1" fill="#0b0d12" transform="rotate(-15 11.3 16)"/>
              </g>
              <!-- Stage 2: hunched -->
              <g class="stage s2" transform="translate(28,0)">
                <circle cx="10" cy="6.5" r="2" fill="#0b0d12"/>
                <rect x="9" y="8.5" width="2.4" height="7" rx="1" fill="#0b0d12" transform="rotate(8 10.2 12)"/>
                <rect x="8" y="14" width="2.2" height="5" rx="1" fill="#0b0d12" transform="rotate(10 9 16.5)"/>
                <rect x="10.6" y="14" width="2.2" height="5" rx="1" fill="#0b0d12" transform="rotate(-6 11.7 16.5)"/>
              </g>
              <!-- Stage 3: upright walk -->
              <g class="stage s3" transform="translate(56,0)">
                <circle cx="10" cy="5.8" r="2" fill="#0b0d12"/>
                <rect x="9.2" y="7.8" width="2.4" height="8.2" rx="1" fill="#0b0d12"/>
                <rect x="8.1" y="14.4" width="2.2" height="5.2" rx="1" fill="#0b0d12" transform="rotate(8 9.2 17)"/>
                <rect x="10.6" y="14.4" width="2.2" height="5.2" rx="1" fill="#0b0d12" transform="rotate(-8 11.7 17)"/>
              </g>
              <!-- Stage 4: modern human stride -->
              <g class="stage s4" transform="translate(84,0)">
                <circle cx="10" cy="5.2" r="2" fill="#0b0d12"/>
                <rect x="9.2" y="7.2" width="2.4" height="9" rx="1" fill="#0b0d12"/>
                <rect x="8.1" y="14.2" width="2.2" height="5.6" rx="1" fill="#0b0d12" transform="rotate(12 9.2 17)"/>
                <rect x="10.6" y="14.2" width="2.2" height="5.6" rx="1" fill="#0b0d12" transform="rotate(-12 11.7 17)"/>
              </g>
              <!-- Stage 5: upright + laptop (fun nod to “mind”) -->
              <g class="stage s5" transform="translate(112,0)">
                <circle cx="10" cy="5" r="2" fill="#0b0d12"/>
                <rect x="9.2" y="7" width="2.4" height="9.4" rx="1" fill="#0b0d12"/>
                <rect x="8.0" y="14.1" width="2.2" height="5.8" rx="1" fill="#0b0d12" transform="rotate(10 9.1 17)"/>
                <rect x="10.6" y="14.1" width="2.2" height="5.8" rx="1" fill="#0b0d12" transform="rotate(-10 11.7 17)"/>
                <rect x="12.8" y="9.8" width="3.8" height="2.2" rx=".4" fill="#0b0d12"/>
              </g>
            </svg>
          </span>
        </button>
        <p id="startDesc" class="subtitle">Begin with a fact, then evolve it layer by layer.</p>
      </div>

      <!-- LIST VIEW -->
      <div id="factListView" class="scrolly hidden">
        <div class="fact-grid" id="factGrid"></div>
      </div>

      <!-- EVOLUTION VIEW -->
      <div id="evoView" class="panel hidden">
        <div class="evo-badge" id="evoMeta"></div>
        <p class="evo-text" id="evoText"></p>

        <div class="actions">
          <button class="btn btn-primary" id="btnDeeper">Evolve.</button>
          <span class="spacer"></span>
          <button class="btn btn-ghost" id="btnExit">I’m no longer interested</button>
        </div>
      </div>
    </section>
  </div>

<script>
/* -------------------- Stars -------------------- */
const stars=document.getElementById('stars'), sctx=stars.getContext('2d');
function resize(){ stars.width=innerWidth; stars.height=innerHeight; } resize(); addEventListener('resize',resize);
const STARS=Array.from({length:160}).map(()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight,z:Math.random()*1.5+.3,dx:(Math.random()-.5)*0.15,dy:(Math.random()-.5)*0.15}));
(function draw(){ requestAnimationFrame(draw); sctx.clearRect(0,0,stars.width,stars.height);
  STARS.forEach(s=>{ s.x+=s.dx*s.z; s.y+=s.dy*s.z;
    if(s.x<0)s.x+=stars.width; if(s.x>stars.width)s.x-=stars.width; if(s.y<0)s.y+=stars.height; if(s.y>stars.height)s.y-=stars.height;
    sctx.fillStyle=`rgba(255,255,255,${0.25*s.z})`; sctx.fillRect(s.x,s.y,1.2*s.z,1.2*s.z); }); })();

/* -------------------- XP -------------------- */
function loadXP(){ try{ return JSON.parse(localStorage.getItem("xp_v1")) || {level:0, xp:0}; } catch { return {level:0, xp:0}; } }
const MAX_LEVEL=100; function xpForNext(level){ if(level>=MAX_LEVEL)return Infinity; const base=200,growth=1.12; return Math.round(base*Math.pow(growth,level)); }
function updateXPUI(){ const xp=loadXP(); const need=xpForNext(xp.level);
  document.getElementById('xpBadge').textContent=`Level ${xp.level}`;
  document.getElementById('xpFill').style.width=(xp.level>=MAX_LEVEL?100:Math.round(100*(xp.xp/need)))+"%";
  document.getElementById('xpMeta').textContent=xp.level>=MAX_LEVEL?`MAX • Level ${MAX_LEVEL}`:`${xp.xp} / ${need} XP`;
}
updateXPUI(); document.addEventListener('visibilitychange',()=>{ if(!document.hidden) updateXPUI(); });

/* -------------------- GAME -------------------- */
const FACTS = [
  {id:"sahara",title:"Sahara Desert",layers:[
    "The Sahara is the largest hot desert on Earth.",
    "It spans about 9 million km² across North Africa.",
    "Average rainfall is typically under 100 mm per year.",
    "Day–night swings can reach from ~50°C to near freezing."]},
  {id:"light",title:"Speed of Light",layers:[
    "Light in vacuum travels at a constant speed.",
    "That constant is ~299,792 km per second.",
    "It’s commonly rounded to 3×10⁵ km/s for simplicity.",
    "This limit shapes causality in modern physics."]},
  {id:"honey",title:"Honey & Spoilage",layers:[
    "Honey can last a very long time.",
    "Its low water activity inhibits microbial growth.",
    "Acidity (~pH 3–4.5) and hydrogen peroxide help preservation.",
    "Archaeologists have found edible honey in ancient tombs."]}
];

const startViewEl=document.getElementById('startView');
const btnStartGame=document.getElementById('btnStartGame');
const factGridEl=document.getElementById('factGrid');
const listViewEl=document.getElementById('factListView');
const evoViewEl=document.getElementById('evoView');
const evoMetaEl=document.getElementById('evoMeta');
const evoTextEl=document.getElementById('evoText');
const btnDeeper=document.getElementById('btnDeeper');
const btnExit=document.getElementById('btnExit');

let currentFact=null, layerIndex=0;

function showStart(){ startViewEl.classList.remove('hidden'); listViewEl.classList.add('hidden'); evoViewEl.classList.add('hidden'); currentFact=null; layerIndex=0; }
function showList(){ startViewEl.classList.add('hidden'); listViewEl.classList.remove('hidden'); evoViewEl.classList.add('hidden'); }
function showEvo(){ startViewEl.classList.add('hidden'); listViewEl.classList.add('hidden'); evoViewEl.classList.remove('hidden'); }

function renderFactGrid(){
  factGridEl.innerHTML='';
  const hues=[200,265,150,15,330,185,95,40,280,125,355,210];
  FACTS.forEach((f,i)=>{
    const h=hues[i%hues.length];
    const card=document.createElement('button');
    card.className='fact-card';
    card.style.setProperty('--h',h);
    card.innerHTML=`<div class="fact-title">${escapeHTML(f.title)}</div><p class="fact-blurb">${escapeHTML(f.layers[0])}</p>`;
    card.addEventListener('click',()=>beginEvolution(f.id));
    factGridEl.appendChild(card);
  });
}

function beginEvolution(fid){
  currentFact=FACTS.find(x=>x.id===fid);
  layerIndex=0;
  updateEvoPanel();
  showEvo();
}

function updateEvoPanel(){
  const total=currentFact.layers.length;
  evoTextEl.textContent=currentFact.layers[layerIndex];
  evoMetaEl.textContent=`Layer ${layerIndex+1} of ${total} • ${currentFact.title}`;
  btnDeeper.disabled=(layerIndex>=total-1);
  btnDeeper.style.opacity=(layerIndex>=total-1?0.6:1);
}

/* Evolve interactions + tasteful effects */
btnStartGame.addEventListener('click',()=>{ renderFactGrid(); showList(); });

btnDeeper.addEventListener('click',()=>{
  if(!currentFact) return;
  if(layerIndex < currentFact.layers.length-1){
    layerIndex++;
    updateEvoPanel();
    // Text pop
    evoTextEl.classList.remove('pop'); void evoTextEl.offsetWidth; evoTextEl.classList.add('pop');
    // Panel glow + ripple
    evoViewEl.classList.remove('glow'); void evoViewEl.offsetWidth; evoViewEl.classList.add('glow');
    const r=document.createElement('span'); r.className='ripple'; evoViewEl.appendChild(r);
    r.addEventListener('animationend', ()=> r.remove(), {once:true});
  }else{
    // Deepest layer: subtle glow only
    evoViewEl.classList.remove('glow'); void evoViewEl.offsetWidth; evoViewEl.classList.add('glow');
  }
});

btnExit.addEventListener('click',()=>{ showStart(); });

function escapeHTML(str){ return String(str).replace(/[&<>"']/g, s=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[s])); }

/* Boot */
showStart();
</script>
</body>
</html>
