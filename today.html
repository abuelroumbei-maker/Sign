<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Today — Do one small thing</title>
<meta name="theme-color" content="#0b0d12" />

<style>
  :root{
    --fg:#e5e7eb; --muted:#9aa4b2; --card:#111827cc;
    --accent:#6d5efc; --accent2:#00c2ff; --accent3:#2dd4bf;
    --bg1:#0b0d12; --bg2:#0e1320;
    --title-font: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    --body-font:  ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{ margin:0; font-family: var(--body-font); color:var(--fg); background:#0b0d12; overflow:hidden; }

  .bg{
    position:fixed; inset:0; z-index:-3;
    background:
      radial-gradient(1000px 640px at 15% 20%, color-mix(in oklab, var(--accent) 28%, transparent), transparent 60%),
      radial-gradient(1000px 640px at 85% 30%, color-mix(in oklab, var(--accent2) 28%, transparent), transparent 60%),
      radial-gradient(900px 640px at 40% 90%, color-mix(in oklab, var(--accent3) 22%, transparent), transparent 60%),
      linear-gradient(120deg, var(--bg1), var(--bg2) 50%, var(--bg1));
    animation:bgDrift 22s ease-in-out infinite alternate;
  }
  @keyframes bgDrift{from{transform:translateX(0)}to{transform:translateX(-1.6%)}}

  #stars{ position:fixed; inset:0; z-index:-2; pointer-events:none }
  #trail{ position:fixed; inset:0; z-index:-1; pointer-events:none }

  .wrap{ position:relative; height:100%; display:grid; place-items:center; padding:18px; }
  .card{ width:min(860px, 94vw); background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:18px; padding:18px; backdrop-filter: blur(8px); box-shadow:0 18px 50px rgba(0,0,0,.35); }
  h1{ margin:0 0 8px; font-size:clamp(22px,6vw,34px); font-family:var(--title-font); }
  p.sub{ margin:0 0 14px; color:#cbd5e1; }

  .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px }
  .btn{ appearance:none; border:0; cursor:pointer; font-weight:900; color:#0a0b0f; padding:14px 16px; border-radius:14px; box-shadow:0 12px 30px rgba(0,0,0,.28); }
  .btn.primary{ background:linear-gradient(135deg,#3b82f6,#bfdbfe) }
  .btn.ghost{ background:#ffffff; color:#0a0b0f; }
  .tag{ display:inline-block; font-size:12px; padding:6px 10px; border-radius:999px; background:linear-gradient(90deg,#e9ecff22,#e5f9ff22); border:1px solid rgba(255,255,255,.18) }
  .meta{ font-size:13px; color:#9aa4b2; margin-top:8px }

  a.back{ position:fixed; left:14px; top:14px; color:#cbd5e1; text-decoration:none; font-weight:800; background:#0f172acc; border:1px solid rgba(255,255,255,.12); padding:8px 10px; border-radius:12px; }
</style>
</head>
<body>
  <div class="bg"></div>
  <canvas id="stars"></canvas>
  <canvas id="trail"></canvas>

  <a class="back" href="index.html">⟵ Home</a>

  <div class="wrap">
    <section class="card" id="todayCard" aria-live="polite">
      <div class="tag" id="tag">Sign</div>
      <h1 id="messageText">Reveal a small, positive prompt</h1>
      <p class="sub" id="explain">Tap reveal to pick today’s tiny action.</p>
      <div class="row">
        <button class="btn primary" id="revealBtn">Reveal today’s message ✨</button>
        <button class="btn ghost" id="willDoBtn" disabled>Will do</button>
        <button class="btn ghost" id="doneBtn" disabled>Done for today</button>
      </div>
      <div class="meta" id="todayMeta">—</div>
    </section>
  </div>

<script>
/* ====== Data ====== */
const SIGNS = [
  { text: "Notice one new thing outside.", explain: "Look for a color, a sound, or a tiny detail you’ve never seen.", tag:"Growth" },
  { text: "Say thank you to someone.", explain: "Appreciation changes the day for both people.", tag:"Kindness" },
  { text: "Ask one curious question.", explain: "Questions open doors to new ideas.", tag:"Curiosity" },
  { text: "Tidy a tiny space for 60 seconds.", explain: "Small resets make big differences.", tag:"Care" },
  { text: "Doodle something colorful.", explain: "No rules. Just play with color.", tag:"Create" }
];

/* ====== State ====== */
const todayKey = new Date().toISOString().slice(0,10);
function loadState(){ try{return JSON.parse(localStorage.getItem('today_v1'))||{};}catch{ return {}; } }
function saveState(s){ localStorage.setItem('today_v1', JSON.stringify(s)); }
let state = loadState();

/* ====== UI refs ====== */
const tag = document.getElementById('tag');
const messageText = document.getElementById('messageText');
const explain = document.getElementById('explain');
const revealBtn = document.getElementById('revealBtn');
const willDoBtn = document.getElementById('willDoBtn');
const doneBtn = document.getElementById('doneBtn');
const todayMeta = document.getElementById('todayMeta');

function pickIndex(){ const seed = Number(localStorage.getItem('seed')||Math.floor(Math.random()*99999)); localStorage.setItem('seed', String(seed)); const doy = Math.floor((Date.now() - new Date(new Date().getFullYear(),0,0)) / 86400000); return (seed + doy) % SIGNS.length; }

function showCard(){ const rec = state[todayKey] || {}; const s = SIGNS[rec.signIndex ?? pickIndex()]; tag.textContent = s.tag || 'Sign'; messageText.textContent = s.text; explain.textContent = s.explain || ''; todayMeta.textContent = rec.done ? 'Marked done ✅' : (rec.planned ? 'Planned for today. Come back to mark done.' : 'Tap "Will do" if you plan to try it.'); willDoBtn.disabled = false; doneBtn.disabled = false; state[todayKey] = { ...(state[todayKey]||{}), signIndex: (rec.signIndex ?? SIGNS.indexOf(s)) }; saveState(state); }

revealBtn.addEventListener('click', ()=>{ showCard(); });
willDoBtn.addEventListener('click', ()=>{ state[todayKey] = { ...(state[todayKey]||{}), planned:true }; saveState(state); todayMeta.textContent = 'Planned for today. Come back to mark done.'; });
doneBtn.addEventListener('click', ()=>{ state[todayKey] = { ...(state[todayKey]||{}), done:true }; saveState(state); todayMeta.textContent = 'Marked done ✅'; });

/* ====== Stars ====== */
const stars = document.getElementById('stars'); const sctx = stars.getContext('2d');
function sizeStars(){ stars.width=innerWidth; stars.height=innerHeight; } sizeStars(); addEventListener('resize', sizeStars);
const STARS = Array.from({length: 160}).map(()=>({ x: Math.random()*innerWidth, y: Math.random()*innerHeight, z: Math.random()*1.5 + 0.3 }));
let mpX=.5, mpY=.5; addEventListener('pointermove', e=>{ mpX=e.clientX/innerWidth; mpY=e.clientY/innerHeight; });
(function drawStars(){ requestAnimationFrame(drawStars); sctx.clearRect(0,0,stars.width,stars.height); STARS.forEach(s=>{ s.x += (mpX - .5) * s.z * .25; s.y += (mpY - .5) * s.z * .25; if(s.x<0)s.x+=stars.width; if(s.x>stars.width)s.x-=stars.width; if(s.y<0)s.y+=stars.height; if(s.y>stars.height)s.y-=stars.height; sctx.fillStyle = `rgba(255,255,255,${0.25*s.z})`; sctx.fillRect(s.x, s.y, 1.2*s.z, 1.2*s.z); }); })();

/* ====== Rainbow trail ====== */
const trail = document.getElementById('trail'); const tctx = trail.getContext('2d');
function sizeTrail(){ trail.width=innerWidth; trail.height=innerHeight; } sizeTrail(); addEventListener('resize', sizeTrail);
let points=[]; addEventListener('pointermove', e=>{ points.push({x:e.clientX, y:e.clientY, t:Date.now()}); if(points.length>160) points.shift(); });
(function drawTrail(){ requestAnimationFrame(drawTrail); const now=Date.now(); tctx.clearRect(0,0,trail.width,trail.height); if(points.length<2) return; tctx.lineCap='round'; tctx.lineJoin='round'; tctx.globalCompositeOperation='lighter'; for(let i=1;i<points.length;i++){ const p0=points[i-1], p1=points[i]; const age=now-p1.t; if(age>1600) continue; const life=1-age/1600, w=2+life*6, hue=(p1.t/12)%360; tctx.strokeStyle=`hsla(${hue},85%,60%,${0.12+life*0.28})`; tctx.lineWidth=w; tctx.beginPath(); tctx.moveTo(p0.x,p0.y); tctx.lineTo(p1.x,p1.y); tctx.stroke(); } })();
</script>
</body>
</html>
