<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Today Is The Day I… — Stars + Trail + Global Sparkles</title>
<meta name="theme-color" content="#0b0d12" />
<style>
  :root{
    --fg:#0f172a; --muted:#5b6476; --card:#ffffffdd;
    --accent:#6d5efc; --accent2:#00c2ff; --accent3:#2dd4bf;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{ margin:0; font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color:var(--fg); background:#0b0d12; overflow:hidden; }

  /* Subtle animated gradient background */
  .bg{
    position:fixed; inset:0; z-index:-4;
    background:
      radial-gradient(1100px 700px at 15% 20%, rgba(109,94,252,.28), transparent 60%),
      radial-gradient(1000px 700px at 85% 30%, rgba(0,194,255,.28), transparent 60%),
      radial-gradient(900px 700px at 40% 90%, rgba(45,212,191,.22), transparent 60%),
      linear-gradient(120deg, #0b0d12, #0e1320 50%, #0b0d12);
    filter:saturate(1.1) brightness(1.05);
    animation:bgDrift 20s ease-in-out infinite alternate;
  }
  @keyframes bgDrift{from{transform:translateX(0)}to{transform:translateX(-1.6%)}}

  .wrap{height:100%; display:grid; place-items:center; padding:22px}
  .app{width:min(860px, 94vw)}
  .title{
    margin:0 0 6px; font-size:clamp(26px,6vw,46px);
    background:linear-gradient(90deg,#fff,#dbeafe,#fff);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    filter:drop-shadow(0 6px 16px rgba(255,255,255,.1));
  }
  .subtitle{margin:0 0 14px; color:#cbd5e1; opacity:.9; font-size:clamp(14px,2.4vw,16px)}

  .card{
    background: var(--card); border-radius:22px; padding:22px 20px;
    box-shadow: 0 18px 50px rgba(3,7,18,.35);
    backdrop-filter: blur(8px);
    transform: translateY(10px) scale(.985); opacity:0; animation:cardIn .5s ease forwards;
  }
  @keyframes cardIn{to{transform:translateY(0) scale(1); opacity:1}}

  .row{display:flex; gap:12px; flex-wrap:wrap; margin-top:12px}

  /* Buttons with halo and ripple */
  .big{
    --halo: #93c5fd; /* default halo color */
    position:relative; overflow:hidden; outline:none;
    flex:1 0 220px; padding:16px 18px; border-radius:16px; font-size:18px; font-weight:800;
    border:0; cursor:pointer; color:#0a0b0f;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    box-shadow: 0 12px 28px rgba(13,148,255,.28);
    transition: transform .05s ease, filter .2s ease, box-shadow .2s ease;
  }
  .big:hover{ filter:brightness(1.06); box-shadow: 0 14px 36px rgba(13,148,255,.36) }
  .big:active{ transform: translateY(1px) scale(.995) }

  /* Soft pulsing halo */
  .big::before{
    content:""; position:absolute; inset:-18%; border-radius:24px;
    background: radial-gradient(60% 60% at 50% 50%, var(--halo), transparent 70%);
    opacity:.0; transform:scale(.85); z-index:0;
    animation:halo 2.6s ease-in-out infinite;
  }
  @keyframes halo{
    0%,100%{opacity:.0; transform:scale(.85)}
    50%    {opacity:.22; transform:scale(1)}
  }

  /* Ripple on click */
  .big::after{
    content:""; position:absolute; left:var(--x,50%); top:var(--y,50%);
    width:0; height:0; border-radius:50%; background:rgba(255,255,255,.35);
    transform:translate(-50%,-50%); opacity:0; pointer-events:none;
    transition:width .45s ease, height .45s ease, opacity .6s ease;
  }
  .big.rippling::after{ width:220%; height:220%; opacity:1 }

  .ghost{
    color:var(--accent); background:#ffffff;
    border:2px solid rgba(109,94,252,.35);
    box-shadow: 0 10px 24px rgba(2,6,23,.08);
  }

  .badge{display:inline-block; font-size:12px; padding:6px 10px; border-radius:999px;
    background:linear-gradient(90deg,#e9ecff,#e5f9ff); color:#254ddf; border:1px solid #dae6ff}
  .today{ font-size:clamp(20px,4.5vw,30px); line-height:1.3; margin:10px 0 8px }
  .meta{ font-size:13px; color:var(--muted) }
  .footer{ margin-top:14px; font-size:12px; color:var(--muted) }

  .nudge{
    display:none; background:#fff7d6; border:1px solid #ffe18a; color:#6a5300;
    padding:10px 12px; border-radius:12px; margin-bottom:12px; font-size:14px;
    box-shadow: 0 6px 14px rgba(0,0,0,.06);
  }

  #toast{
    position:fixed; left:50%; bottom:24px; transform:translateX(-50%) translateY(120%);
    background:#111; color:#fff; padding:12px 16px; border-radius:12px;
    box-shadow:0 12px 32px rgba(0,0,0,.45); font-size:14px; z-index:999; max-width:90vw;
    text-align:center; opacity:0; transition:transform .35s ease, opacity .35s ease;
  }

  /* Canvas layers (ordered by depth) */
  #stars   { position:fixed; inset:0; pointer-events:none; z-index:-3 } /* behind trail */
  #trail   { position:fixed; inset:0; pointer-events:none; z-index:-2 } /* rainbow mouse trail */
  #clickfx { position:fixed; inset:0; pointer-events:none; z-index: 998 } /* sparkles above content */

  @media (prefers-reduced-motion: reduce){
    .bg{animation:none} .big::after{display:none} .big::before{animation:none}
  }
</style>
</head>
<body>
  <div class="bg"></div>
  <canvas id="stars"></canvas>
  <canvas id="trail"></canvas>
  <canvas id="clickfx"></canvas>

  <div class="wrap">
    <main class="app">
      <h1 class="title">Today Is The Day I…</h1>
      <p class="subtitle">Tap to reveal a short, positive prompt. One per day. No accounts, no tracking.</p>

      <div id="screen-intro" class="card">
        <div id="nudgeBanner" class="nudge">Did you do yesterday’s sign?</div>

        <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px;">
          <div id="mascot" style="font-size:28px;display:inline-block">🫘</div>
          <div id="streakInfo" class="meta">Current streak: 0 days</div>
        </div>

        <button id="revealBtn" class="big" style="--halo:#60a5fa;">Reveal today’s message ✨</button>
        <div class="row">
          <button id="skipBtn" class="big ghost" style="--halo:#a78bfa;">Nah, maybe later</button>
        </div>
      </div>

      <div id="screen-today" class="card" style="display:none">
        <div class="badge" id="tag">Sign</div>
        <div class="today" id="messageText"></div>
        <div class="meta" id="explain"></div>

        <div class="row">
          <button id="willDoBtn" class="big" style="--halo:#34d399;">Will do ✅</button>
          <button id="doneBtn"   class="big ghost" style="--halo:#fbbf24;">Done for today</button>
        </div>

        <div class="footer" id="todayMeta"></div>
      </div>
    </main>
  </div>

  <!-- Toast -->
  <div id="toast"><span id="toastText">Saved</span></div>

<script>
/* ====== DATA ====== */
const SIGNS = [
  { text: "Notice one new thing outside.", explain: "Look for a color, a sound, or a tiny detail you’ve never seen.", tag:"Growth" },
  { text: "Say thank you to someone.", explain: "Appreciation changes the day for both people.", tag:"Kindness" },
  { text: "Ask one curious question.", explain: "Questions open doors to new ideas.", tag:"Curiosity" },
  { text: "Tidy a tiny space for 60 seconds.", explain: "Small resets make big differences.", tag:"Care" },
  { text: "Doodle something colorful.", explain: "No rules. Just play with color.", tag:"Create" }
];

/* ====== STATE/HELPERS ====== */
const qs = s=>document.querySelector(s);
function dayOfYear(d=new Date()){const start=new Date(d.getFullYear(),0,0);return Math.floor((d-start)/86400000)}
function getSeed(){let s=localStorage.getItem("seed"); if(!s){s=Math.floor(Math.random()*100000).toString(); localStorage.setItem("seed", s);} return parseInt(s,10)}
function pickTodayIndex(){const idx=(dayOfYear()+getSeed())%SIGNS.length; return idx<0?idx+SIGNS.length:idx}
function ymd(d=new Date()){return d.toISOString().slice(0,10)}
function loadState(){try{return JSON.parse(localStorage.getItem("state_v1"))||{}}catch{return{}}}
function saveState(s){localStorage.setItem("state_v1", JSON.stringify(s))}

const state=loadState(); const todayKey=ymd();
const yesterdayKey=(()=>{const d=new Date(); d.setDate(d.getDate()-1); return ymd(d)})();

/* ====== UI REFS ====== */
const screenIntro=qs("#screen-intro"), screenToday=qs("#screen-today");
const revealBtn=qs("#revealBtn"), skipBtn=qs("#skipBtn"), willDoBtn=qs("#willDoBtn"), doneBtn=qs("#doneBtn");
const messageText=qs("#messageText"), explain=qs("#explain"), tag=qs("#tag"), todayMeta=qs("#todayMeta");
const streakInfo=qs("#streakInfo"), nudgeBanner=qs("#nudgeBanner");
const toast=qs("#toast"), toastText=qs("#toastText");

/* ====== STREAK/NUDGE ====== */
function computeStreak(){let s=0; const d=new Date(); d.setDate(d.getDate()-1);
  for(;;){const k=d.toISOString().slice(0,10); if(state[k]?.done===true){s++; d.setDate(d.getDate()-1)}else break;} return s}
function mascotFor(streak){if(streak>=10)return"🌳"; if(streak>=5)return"🌿"; if(streak>=2)return"🌱"; return"🫘"}
function getYesterdayNudge(){const y=state[yesterdayKey]; if(y&&y.planned===true&&y.done==null)return"Did you do yesterday’s sign?"; return null}
function updateStreakInfo(){
  const n=getYesterdayNudge(); const s=computeStreak();
  if(nudgeBanner) nudgeBanner.style.display = n ? "block" : "none";
  streakInfo.textContent = `Current streak: ${s} day${s===1?"":"s"}`;
  const m=qs("#mascot"); m.textContent=mascotFor(s); m.style.fontSize=(28+Math.min(s*2,22))+"px";
}

/* ====== TOAST ====== */
function showToast(msg, ms=1800){
  toastText.textContent=msg;
  toast.style.opacity="1";
  toast.style.transform="translateX(-50%) translateY(0)";
  clearTimeout(showToast._h);
  showToast._h=setTimeout(()=>{
    toast.style.opacity="0";
    toast.style.transform="translateX(-50%) translateY(120%)";
  }, ms);
}

/* ====== RIPPLE ON BUTTON ====== */
function attachRipple(btn){
  btn.addEventListener('pointerdown', e=>{
    const r=btn.getBoundingClientRect();
    btn.style.setProperty('--x', (e.clientX-r.left)+'px');
    btn.style.setProperty('--y', (e.clientY-r.top)+'px');
    btn.classList.add('rippling');
    setTimeout(()=>btn.classList.remove('rippling'), 480);
  });
}
[revealBtn, skipBtn, willDoBtn, doneBtn].forEach(attachRipple);

/* ====== STARS BACKGROUND ====== */
const stars = qs("#stars"), sctx = stars.getContext("2d");
function resizeStars(){ stars.width=innerWidth; stars.height=innerHeight; }
resizeStars(); addEventListener('resize', resizeStars);

const STARS = Array.from({length: 160}).map(()=>({
  x: Math.random()*innerWidth,
  y: Math.random()*innerHeight,
  z: Math.random()*1.5 + 0.3 // depth (0.3—1.8)
}));

let mousePX = 0.5, mousePY = 0.5; // for gentle parallax
addEventListener('pointermove', e=>{
  mousePX = e.clientX / innerWidth;
  mousePY = e.clientY / innerHeight;
});

(function drawStars(){
  requestAnimationFrame(drawStars);
  sctx.clearRect(0,0,stars.width,stars.height);
  STARS.forEach(s=>{
    // gentle drift + parallax
    s.x += (mousePX - 0.5) * s.z * 0.3;
    s.y += (mousePY - 0.5) * s.z * 0.3;
    if (s.x < 0) s.x += stars.width; if (s.x > stars.width) s.x -= stars.width;
    if (s.y < 0) s.y += stars.height; if (s.y > stars.height) s.y -= stars.height;
    sctx.fillStyle = `rgba(255,255,255,${0.25*s.z})`;
    sctx.fillRect(s.x, s.y, 1.2*s.z, 1.2*s.z);
  });
})();

/* ====== RAINBOW MOUSE TRAIL ====== */
const trail = qs("#trail"), tctx = trail.getContext("2d");
function resizeTrail(){ trail.width=innerWidth; trail.height=innerHeight; }
resizeTrail(); addEventListener('resize', resizeTrail);

let points=[]; // recent pointer positions
addEventListener('pointermove', e=>{
  points.push({x:e.clientX, y:e.clientY, t:Date.now()});
  if(points.length>140) points.shift();
});
(function drawTrail(){
  requestAnimationFrame(drawTrail);
  const now=Date.now();
  tctx.clearRect(0,0,trail.width,trail.height);
  if(points.length<2) return;
  tctx.lineCap="round"; tctx.lineJoin="round"; tctx.globalCompositeOperation="lighter";
  for(let i=1;i<points.length;i++){
    const p0=points[i-1], p1=points[i];
    const age = now - p1.t; if(age>1600) continue;
    const life = 1 - age/1600;
    const w = 2 + life*6;
    const hue = (p1.t/12) % 360;
    tctx.strokeStyle = `hsla(${hue}, 85%, 60%, ${0.12 + life*0.28})`;
    tctx.lineWidth = w;
    tctx.beginPath(); tctx.moveTo(p0.x, p0.y); tctx.lineTo(p1.x, p1.y); tctx.stroke();
  }
})();

/* ====== GLOBAL CLICK SPARKLES (anywhere) ====== */
const clickfx = qs("#clickfx"), cfx = clickfx.getContext("2d");
function resizeFX(){ clickfx.width=innerWidth; clickfx.height=innerHeight; }
resizeFX(); addEventListener('resize', resizeFX);

const PALETTES = {
  bg:    ['#60a5fa','#38bdf8','#34d399','#fbbf24','#a78bfa'],
  reveal:['#60a5fa','#38bdf8','#93c5fd','#bae6fd'],
  skip:  ['#a78bfa','#c4b5fd','#ddd6fe','#e9d5ff'],
  willdo:['#34d399','#2dd4bf','#6ee7b7','#a7f3d0'],
  done:  ['#f59e0b','#fbbf24','#fde68a','#fcd34d']
};

function burst(x,y, palette, count=18){
  const parts=[];
  for(let i=0;i<count;i++){
    parts.push({
      x, y,
      vx:(Math.random()-.5)*5,
      vy:(Math.random()-.5)*5-2,
      life:560,
      r:2+Math.random()*2,
      c: palette[i % palette.length]
    });
  }
  const start=performance.now();
  (function loop(t){
    const elapsed = t - start;
    cfx.clearRect(0,0,clickfx.width,clickfx.height);
    const alive = [];
    parts.forEach(p=>{
      p.x += p.vx; p.y += p.vy; p.vy += .05; p.life -= 16;
      if(p.life>0){ alive.push(p); cfx.fillStyle=p.c; cfx.beginPath(); cfx.arc(p.x,p.y,p.r,0,Math.PI*2); cfx.fill(); }
    });
    if(alive.length) requestAnimationFrame(loop);
  })(start);
}

/* Choose palette by where you clicked */
function paletteForTarget(target){
  const btn = target.closest ? target.closest('button') : null;
  if (btn){
    if (btn.id === 'revealBtn') return PALETTES.reveal;
    if (btn.id === 'skipBtn')   return PALETTES.skip;
    if (btn.id === 'willDoBtn') return PALETTES.willdo;
    if (btn.id === 'doneBtn')   return PALETTES.done;
  }
  return PALETTES.bg; // background default
}

/* Global click handler: sparkles anywhere */
document.addEventListener('pointerdown', (e)=>{
  burst(e.clientX, e.clientY, paletteForTarget(e.target), 20);
});

/* ====== TODAY CARD & EVENTS ====== */
function showTodayCard(){
  const idx=pickTodayIndex(), s=SIGNS[idx];
  tag.textContent=s.tag||"Sign";
  messageText.textContent=s.text;
  explain.textContent=s.explain||"";
  const rec=state[todayKey]||{};
  todayMeta.textContent = rec.planned ? "You planned this today." : "Tap “Will do” if you plan to try it.";
  screenIntro.style.display="none"; screenToday.style.display="block";
}

revealBtn.onclick = ()=>{
  if(!state[todayKey]) state[todayKey]={planned:null,done:null,signIndex:pickTodayIndex()};
  saveState(state);
  showTodayCard();
};
skipBtn.onclick = ()=>{
  if(!state[todayKey]) state[todayKey]={planned:false,done:null,signIndex:pickTodayIndex()};
  else state[todayKey].planned=false;
  saveState(state);
  showToast("All good. Come back anytime today.");
  updateStreakInfo();
};
willDoBtn.onclick = ()=>{
  state[todayKey]=state[todayKey]||{signIndex:pickTodayIndex()};
  state[todayKey].planned=true; state[todayKey].done=null; saveState(state);
  todayMeta.textContent="You planned this today. Come back later to mark it done.";
  showToast("Nice! Come back later and tap “Done for today”.");
  updateStreakInfo();
};
doneBtn.onclick = ()=>{
  state[todayKey]=state[todayKey]||{signIndex:pickTodayIndex()};
  state[todayKey].done=true; saveState(state);
  todayMeta.textContent="Marked done ✅";
  showToast("Great job! ✅");
  updateStreakInfo();
};

/* ====== INIT ====== */
updateStreakInfo();
</script>
</body>
</html>


